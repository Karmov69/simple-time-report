os:
  - linux
language: php
php:
  - "7.2"
before_script:
  - composer self-update
  - composer install --no-interaction
  - cp .env.travis .env
  - php artisan key:generate
  - php artisan migrate
  - php artisan db:seed
  - pear install pear/PHP_CodeSniffer
  - phpenv rehash
  - nvm install 8.10.0
  - npm install npm@latest -g
  - npm install -g jshint
  - npm install
before_install:
  - mysql -e 'CREATE DATABASE homestead_test;'
script:
  - npm run lint
  - npm run test
  - npm run production
services:
  - mysql
cache:
  directories:
    - node_modules
    - vendor
deploy:
  provider: script
  script: bash scripts/deploy.sh
  skip_cleanup: true
  on:
    branch: master
notifications:
  slack:
    secure: W8M0e15uqamYjMKvttLAgwBccMEOi+LwL0pqYGFqJgGKiqlKDDwNBefzGHDNwz/RdIjiI6JzPpeHzfUp8fkw1Xxdemrp/PE/d0iiYJpqfRMF8ccMNE5GlRtfd55Gv8r0drx1+SsgxZtMku9YpWTMTI06S4fpIROWAJdErtrZJgeC/pqZCkh2UqWE5msuCx/tsriTrylusKr5PGyLsScktlLRB7Q9zpqjYz//a8oKc4jj0w9mDlYb5MNT4SwhMOA0jEDXCH41bfOSO8RcAEhAf4hkv79y7rnZj7QffUZwNd+6yFK2IDYiC506oFqcotblX0PI9yXHo9fgJq+VtmF/V2uOU5uK1Mplukc5vvaokKhBHK3i1gGwiSwDXLI4/XNoGWb+ivMiKDPsgDhdhdONZJp5G0Evy/fqXsoUd6DkD1bMwsWPYyDcBCnWI2R6uy29bFMurkUxB1cF1p5GPaha8univWx3AENsy7jawvftUxvMOn7YB462YiF6UNw3gWydpNFNy8/BJH9kbCVQdojJagaCQeqZrcY3BVn+y3d5nNakUH6wxRA+49E1xi8GgMTCtgH0SNwgZYowh81F9q9rGzAk13GW+1aU5pm+gqraGSKl/BoVc7hRSes5F3x1HBBfgZ+Ep6UUZe603pAR8jFVqVDRN1pzNZbKCPXhDGIMdFM=
env:
  global:
    secure: QOpTcHg+Uxurz8tWK/IInauFFx4uxTJMTZnVgAxo1N407t7/dmH0zIxjNE1EUMQreZz8k1HiHGKQNv2naKFnisCyL1vrl6yhm3vUI4VlkhOzYBu9bo+DF4nCJFFMLbtOhGwR0a4QNgF01eRPVV6F5Trm/9VtY6Q+zVEp6Rb/82A8j6lCIm4r8od/7ZvyFRO6qHKHcPfWiOGzkxx1eGQoRJ3WvEuKcjKmru7qIl2EAPU8GKBdh6rmH2yko3r4ZZDXmuV8Nb8SDBUpkGK3Ap6eFjjaxdpCBzAawgTEgPv2ntkNvKR8plkOEKhGQU3Z0WTnx1LatZbktV6A5mS/cMTrccHmxBPn6Ty6DhAo9xIjqY3YMikOq+05qsjUd0g9oDFJHWUASohmD/mlmjYm2rZgRtV1nCouIcJ2VfHJzwvXFe2W8oP1TvJKhsnLooPGoASMnbd0wNpJzmA+Tdf7vmo9oREsyI/KZP02SEPRwfwccWe0MEYrjf8qmPOug7NmX+3x4ISbJ+JGxr7k7dms+PpHTM8iyelSJCJYI7zhlwNmodr+DLRbrGEEY4Np1g895YjMuZ1XgaLrJYBxdLo06IiDHwniyCHXkBog/79eM2X3hoLXPSrnxsc9RJn6eawby4QRiXoNujFl5Aevv5gXo+6XaZ6e3NbpGUyqKsWrrRZl7qg=
