os:
  - linux
language: php
php:
  - "7.2"
before_script:
  - composer self-update
  - composer install --no-interaction
  - cp .env.travis .env
  - php artisan key:generate
  - php artisan migrate
  - php artisan db:seed
  - pear install pear/PHP_CodeSniffer
  - phpenv rehash
  - nvm install 8.10.0
  - npm install npm@latest -g
  - npm install -g jshint
  - npm install
before_install:
  - mysql -e 'CREATE DATABASE homestead_test;'
script:
  - npm run lint
  - npm run test
  - npm run production
services:
  - mysql
cache:
  directories:
    - node_modules
    - vendor
deploy:
  provider: script
  script: bash scripts/deploy.sh
  skip_cleanup: true
  on:
    branch: master
notifications:
  slack:
    secure: V0AbNAyjfqb7vv/DGUtU6GlHQvA7BAz99NQDd2BUgyAMfsmxzVUiFxIM9Fb4r9XsGzqBaQHFG8o4jmUHW/M7q5n90QOb5hMr84Fy+U0WnPZTYuhdhn1Bo8FUEDpDVwYED9RYDBAaBavbv4AS9e6yvGKDtoPiTOfwsZpk03lTdayJcokAzErcr8z8UMilTzLGwsyElIzBkgavdyefLT4FcKZRN1zc9vs5Ey+uDgnzE9Qrgk6+fYuWLAeDSUgxh4nZ3zNywqOLxkgT7/BJpxYoU6NTXHVRSmGu2ngqq/VU4Ov8uahWhlGSNUuKJW+61WIG1Tcs/adLIKZlqHZ9IXGA5YHHGQ5spBOQqOdx2D/GgtZw67367a9Me0bFlE5D4fIou3ZmbM4VA2VfhzyZvShelZwenLOXUo5DmDvdGdlsvcgbulilRDsNkji9aYSyva7actpwvEfD4hQSy2pejOu9BdjT9euDtkEp465dq1G5O8wwxMfBZaOuPqj5uBWaPriujecUkwzdkPfz/B5G5wlZia6L6UFqNGTmHORUBsYGTLLFWn89w35ZsUkS6xLjF4QS/p8d/gurKiYsGm87VCywp6ymoPLORsJ+O6zW9Gf6r/If4uV42dMCClT3JKEBxMRos7Llv4CYDRR2nXjU8txqmzxnzhnMfexCAbCCygS87Zs=
env:
  global:
    secure: dfTGj5nPsJsMBpoOpSVPkLfwIbO87dRIrUVe4As+V2YgSd/0WzdjRkgjC08uPVXS2SM6rrRrxD1HV0gZfHDoyf4i1IhQNRoT3ep4s1fSbMRzD+jnlPBEO5mO52lNO04hGzJGGrfqypZzNV1bnsYZjIWNOQKNM8HlL/f2A4H17/TUR/EKeHAiwk9+LkqgijtApwJxFXTGXEELlPgeEHSjgKgeT2YLJb4OQQSLgNbOOn2UU2HzwkqKM8K6SRRRq+DeRzMhIkw2kvwUMPVd6pb6C5L1h6FTBAiBymkrpvmGvdRy3Q2k/0ULP4nQ42ibjOhqNL4JLirCS5Zzz8sdfZZ+loTekEy4w60DljHXq1rQqhfvSIc4mmzXkYJW8MYPt5C6H2s3zEaQx01+Amf7HZMkjNjnpjeNRE0dABp08Xim+sWpoQtKdt0MHsLP3pbRIEhsOuIlENmJnIX6fEpIBpzC5MWvnQmdincqb+Yaynk6byzXalpkKJwOGUHic2bIxN8hhgWExNaD5Q2h5Jj0sg6UcSjkXWpqpS3L99jThiRRIdl2Leut1y5GnxAdfjwJFvg6Qb0RNgsMM8NEBvxewZ/KsHjGbkZx4axKNO3EoHMkPl9D13LZ7pykDfvzCjgYjgJnIh249s3CJ7RM8cgWCeE2thaOhDh+QEhRCvNY1KLjq38=
