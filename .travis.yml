os:
  - linux
language: php
php:
  - "7.2"
before_script:
  - composer self-update
  - composer install --no-interaction
  - cp .env.travis .env
  - php artisan key:generate
  - php artisan migrate
  - php artisan db:seed
  - pear install pear/PHP_CodeSniffer
  - phpenv rehash
  - nvm install 8.10.0
  - npm install npm@latest -g
  - npm install -g jshint
  - npm install
before_install:
  - mysql -e 'CREATE DATABASE homestead_test;'
script:
  - npm run lint
  - npm run test
  - npm run production
services:
  - mysql
cache:
  directories:
    - node_modules
    - vendor
deploy:
  provider: script
  script: bash scripts/deploy.sh
  skip_cleanup: true
  on:
    branch: master
notifications:
  slack:
    secure: W8M0e15uqamYjMKvttLAgwBccMEOi+LwL0pqYGFqJgGKiqlKDDwNBefzGHDNwz/RdIjiI6JzPpeHzfUp8fkw1Xxdemrp/PE/d0iiYJpqfRMF8ccMNE5GlRtfd55Gv8r0drx1+SsgxZtMku9YpWTMTI06S4fpIROWAJdErtrZJgeC/pqZCkh2UqWE5msuCx/tsriTrylusKr5PGyLsScktlLRB7Q9zpqjYz//a8oKc4jj0w9mDlYb5MNT4SwhMOA0jEDXCH41bfOSO8RcAEhAf4hkv79y7rnZj7QffUZwNd+6yFK2IDYiC506oFqcotblX0PI9yXHo9fgJq+VtmF/V2uOU5uK1Mplukc5vvaokKhBHK3i1gGwiSwDXLI4/XNoGWb+ivMiKDPsgDhdhdONZJp5G0Evy/fqXsoUd6DkD1bMwsWPYyDcBCnWI2R6uy29bFMurkUxB1cF1p5GPaha8univWx3AENsy7jawvftUxvMOn7YB462YiF6UNw3gWydpNFNy8/BJH9kbCVQdojJagaCQeqZrcY3BVn+y3d5nNakUH6wxRA+49E1xi8GgMTCtgH0SNwgZYowh81F9q9rGzAk13GW+1aU5pm+gqraGSKl/BoVc7hRSes5F3x1HBBfgZ+Ep6UUZe603pAR8jFVqVDRN1pzNZbKCPXhDGIMdFM=
env:
  global:
    secure: dfTGj5nPsJsMBpoOpSVPkLfwIbO87dRIrUVe4As+V2YgSd/0WzdjRkgjC08uPVXS2SM6rrRrxD1HV0gZfHDoyf4i1IhQNRoT3ep4s1fSbMRzD+jnlPBEO5mO52lNO04hGzJGGrfqypZzNV1bnsYZjIWNOQKNM8HlL/f2A4H17/TUR/EKeHAiwk9+LkqgijtApwJxFXTGXEELlPgeEHSjgKgeT2YLJb4OQQSLgNbOOn2UU2HzwkqKM8K6SRRRq+DeRzMhIkw2kvwUMPVd6pb6C5L1h6FTBAiBymkrpvmGvdRy3Q2k/0ULP4nQ42ibjOhqNL4JLirCS5Zzz8sdfZZ+loTekEy4w60DljHXq1rQqhfvSIc4mmzXkYJW8MYPt5C6H2s3zEaQx01+Amf7HZMkjNjnpjeNRE0dABp08Xim+sWpoQtKdt0MHsLP3pbRIEhsOuIlENmJnIX6fEpIBpzC5MWvnQmdincqb+Yaynk6byzXalpkKJwOGUHic2bIxN8hhgWExNaD5Q2h5Jj0sg6UcSjkXWpqpS3L99jThiRRIdl2Leut1y5GnxAdfjwJFvg6Qb0RNgsMM8NEBvxewZ/KsHjGbkZx4axKNO3EoHMkPl9D13LZ7pykDfvzCjgYjgJnIh249s3CJ7RM8cgWCeE2thaOhDh+QEhRCvNY1KLjq38=
