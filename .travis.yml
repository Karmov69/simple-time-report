os:
  - linux
language: php
php:
  - "7.2"
before_script:
  - composer self-update
  - composer install --no-interaction
  - cp .env.travis .env
  - php artisan key:generate
  - php artisan migrate
  - php artisan db:seed
  - pear install pear/PHP_CodeSniffer
  - phpenv rehash
  - nvm install 8.10.0
  - npm install npm@latest -g
  - npm install -g jshint
  - npm install
before_install:
  - mysql -e 'CREATE DATABASE homestead_test;'
script:
  - npm run lint
  - npm run test
  - npm run production
services:
  - mysql
cache:
  directories:
    - node_modules
    - vendor
deploy:
  provider: script
  script: bash scripts/deploy.sh
  skip_cleanup: true
  on:
    branch: master
notifications:
  slack:
    secure: ReLS/44uQ4k0LOZRtvGqB5W4FWM0D8j5R/vg/3SRzt6gPmmBt7qI+4JA+4bcP5eVxMoztWCslZ/O1aa9Am7l6Fb2BMnc7Xzw1/AO+5WcjYVKURjqVlvZVQXJcEyv9Pg4gAN510B/HLZ8xVUbLhXYgARQ5nDtNOvkBtJ67dItF7w121HZ9Ay5Tt6GX+w1Y5ZFC49ivTGld8sF892SlZmynFEGvtyYA2Vcu71kmzrL+VrEx6vGhZ8zX2vH02Rnmu9xWoosL5VtujzZLUskehJrBkz6Oc+DBZ2inzSuQWhWgxRCuJoUrkOqmJrbGuc2IQz2HT8UVe8IH0SMHS9RoKGZbEn5NNW2Rtr16Vi5ErQ2CO7yKSovdOTcSGFMF0f2JJAtfUTdKA1zbKFLWYj9aADAhW2gut2OzD5b0Yb5Q/TLbnd58u+8yG68su50hs2jkrNm2CC4U9Tf4eWUvuNYRsmVkqYFLqPSzGmIzW3q/59hFovRh1lu7E1H237R9yDAThaaC7Rz+b7MZ/EQP0K96vGDYM2MKd9oz0uj3SLw9/HlJrxlF3fmERg0Gy8oTkCH9RtletsWhrLPJMDzcGXEtwk9NSuOSELq0vHz5uLKJwc1LoK/mGFNHHiH6Vt6cPgvBOfUXktXvgGwT5oSl5iFP+LRTYogXLUqlMBBOHKsceqqKbU=
env:
  global:
    secure: p84NXzqnlGlAIy+BSYZGCChxdSmPPwfbJ4whU7fZGtqsGaDWtXY3rACu40+VP3gRU9CZjrqiLxyCzSIK5OGTNrIw14zN7BtgMTjJTzORLDo/na116uBNMgprDmn2eZgx5DOO9dU3wh1brSYu+JhFd0UV3juKVK3VIlhREkfrPkEQTOCkGPjahnGXQjk+9HMxX6ZWZw7ySXYIAQ27yu5vNz1AKS/WeH8Ct5sIQOtwVf8QbRkqLZvLuhWNL4X6Y2yq6Z96VTbgCCCLu0wWnvYt69PqfxCwAWeaz15MlE0RCYSxphh9l1vjAP6SlsAsZURv/6IqVEDzTf6HoxrsAwaoNLVmRfPBg9iO4JRYTHCeWNgTiW/gAAhG6AKTcGVyx+H/yxN0rpn7LFBs1QSfcG5KNlfL1199otodpzBULkI74zKcAHs6hCxoJU+iAgoVVD33Qo1rboQH04zeUfSi77go1+RC/ggzrBQF0RKrs8+uUGldhKnAShDhxvd4gNNTZoJzUcwzFLUPhBSE8EyGdwg0y75OCs8yDpMeax0F1QLaPdj13cpSLNBuscOwjgqEa7VlB2EBmNuZY22rOHp6CYxX5fM6UmCb/8ik8qCipy+NKiaSnfZZeBZaS7Jd15LI1Hdv/9kcjrOI105vF0UkY/3E57MslRiucdjPQ79dQpn3UFk=
